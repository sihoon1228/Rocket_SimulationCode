<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>로켓 시뮬레이션 코드</title>
  <style>
    :root {
      --bg: #0b0f14;
      --card: #111826;
      --text: #e6eef7;
      --muted: #9bb3c7;
      --accent: #3ea6ff;
      --border: #1f2a3a;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
      background: linear-gradient(180deg, #0a0e14, #0e1622 30%, #0a0e14);
      color: var(--text);
    }
    header {
      padding: 48px 20px 20px;
      text-align: center;
    }
    h1 {
      margin: 0 0 8px;
      font-size: 2rem;
      letter-spacing: 0.2px;
    }
    p.subtitle {
      margin: 0;
      color: var(--muted);
    }
    .container {
      max-width: 980px;
      margin: 24px auto 80px;
      padding: 0 20px;
    }
    .card {
      background: radial-gradient(1200px 600px at 10% -20%, rgba(62,166,255,0.08), transparent 40%),
                  radial-gradient(900px 600px at 90% -10%, rgba(62,166,255,0.06), transparent 40%),
                  var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 12px;
      flex-wrap: wrap;
    }
    .filename {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      color: var(--muted);
      font-size: 0.9rem;
    }
    button.copy {
      border: 1px solid var(--border);
      background: linear-gradient(180deg, #111a28, #0e1420);
      color: var(--text);
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    button.copy:hover { border-color: #2a3a52; }
    pre {
      margin: 0;
      overflow: auto;
      line-height: 1.6;
      border-radius: 12px;
      padding: 16px;
      background: #0b1220;
      border: 1px solid var(--border);
    }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 0.9rem;
      tab-size: 4;
      white-space: pre;
      color: #e7f0ff;
    }
    footer {
      text-align: center;
      color: var(--muted);
      padding: 30px 0 60px;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>로켓 시뮬레이션 코드</h1>
    <p class="subtitle">Python · NumPy · Matplotlib · SciPy · 3D Trajectory</p>
  </header>

  <main class="container">
    <section class="card">
      <div class="toolbar">
        <div class="filename">file: <strong>rocket_simulation.py</strong></div>
        <button class="copy" id="copyBtn" aria-label="코드 복사">코드 복사</button>
      </div>
      <pre><code id="codeBlock">import numpy as np
import matplotlib
matplotlib.use(&#x27;TkAgg&#x27;)  # GUI 환경에서 실행할 경우
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
from scipy.integrate import solve_ivp

# === 파라미터 ===
g = 9.81               # 중력가속도(m/s^2)
m0 = 0.5               # 초기 질량(kg)
dm_dt = -0.02          # 질량 유량(kg/s) → 연료 소모 속도
A = 0.02               # 단면적(m^2)
C_D = 0.75             # 항력 계수
rho0 = 1.225           # 해수면 공기 밀도(kg/m^3)
H = 8500               # 대기 밀도 감소 고도(m)
burn_time = 3      # 연소 시간(s)
thrust_magnitude = 20  # 추진력(N)

theta_deg = 20         # 고각
phi_deg = 30           # 방위각
theta = np.radians(theta_deg)
phi = np.radians(phi_deg)

wind_velocity = np.array([0.0, 2.0, 0.0])  # [동, 북, 상] 바람 속도(m/s)

# === 시간 설정 ===
t_span = (0, 30)
t_eval = np.linspace(*t_span, 500)

# === 추력 벡터 ===
def thrust_vector(t):
    if t &gt; burn_time:
        return np.zeros(3)
    return thrust_magnitude * np.array([
        np.cos(theta) * np.cos(phi),
        np.cos(theta) * np.sin(phi),
        np.sin(theta)
    ])

# === 운동 방정식 ===
def rocket_derivatives(t, y):
    r = y[:3]      # 위치
    v = y[3:]      # 속도
    h = r[2]       # 고도
    m = max(m0 + dm_dt * t, 0.1)  # 시간에 따른 질량 (최소값 제한)
    rho = rho0 * np.exp(-h / H)   # 고도에 따른 공기 밀도
    v_rel = v - wind_velocity     # 상대 속도

    F_gravity = np.array([0, 0, -m * g])
    F_drag = -0.5 * rho * C_D * A * np.linalg.norm(v_rel) * v_rel
    F_thrust = thrust_vector(t)
    pseudo_force = - (dm_dt / m) * v  # 질량 손실에 따른 추가 항

    a = (F_thrust + F_gravity + F_drag) / m + pseudo_force
    return np.concatenate((v, a))

# === 초기 조건 ===
y0 = np.array([0, 0, 0, 0, 0, 0])
sol = solve_ivp(rocket_derivatives, t_span, y0, t_eval=t_eval)
x, y, z = sol.y[0], sol.y[1], sol.y[2]

# === 비행 정보 ===
landing_index = np.where(z &gt;= 0)[0][-1]
flight_time = sol.t[landing_index]
max_altitude = np.max(z)
max_altitude_index = np.argmax(z)
horizontal_distance = np.linalg.norm([x[landing_index], y[landing_index]])

# === 애니메이션 설정 ===
fig = plt.figure()
ax = fig.add_subplot(111, projection=&#x27;3d&#x27;)
ax.set_xlim(np.min(x) * 1.1, np.max(x) * 1.1)
ax.set_ylim(np.min(y) * 1.1, np.max(y) * 1.1)
ax.set_zlim(0, np.max(z) * 1.1)
ax.set_xlabel(&#x27;X (m)&#x27;)
ax.set_ylabel(&#x27;Y (m)&#x27;)
ax.set_zlabel(&#x27;Z (m)&#x27;)
ax.set_title(f&#x27;Rocket Trajectory (θ={theta_deg}°, φ={phi_deg}°)&#x27;)

trajectory_line, = ax.plot([], [], [], &#x27;b-&#x27;, lw=2)
rocket_point, = ax.plot([], [], [], &#x27;ro&#x27;)
text_box = ax.text2D(0.05, 0.80, &quot;&quot;, transform=ax.transAxes)

# 최고고도 표시
peak_marker = ax.scatter([x[max_altitude_index]], [y[max_altitude_index]], [z[max_altitude_index]], c=&#x27;g&#x27;, s=50)
peak_label = ax.text(
    x[max_altitude_index], y[max_altitude_index], z[max_altitude_index],
    f&#x27;{z[max_altitude_index]:.2f} m&#x27;,
    fontsize=10, color=&#x27;green&#x27;
)

animation_running = True

def update(frame):
    global animation_running
    if not animation_running:
        return trajectory_line, rocket_point, text_box

    trajectory_line.set_data(x[:frame], y[:frame])
    trajectory_line.set_3d_properties(z[:frame])
    rocket_point.set_data([x[frame]], [y[frame]])
    rocket_point.set_3d_properties([z[frame]])

    if frame &gt;= landing_index:
        text_box.set_text(
            f&quot;Max Altitude: {max_altitude:.2f} m\n&quot;
            f&quot;Flight Time: {flight_time:.2f} s\n&quot;
            f&quot;Horizontal Distance: {horizontal_distance:.2f} m&quot;
        )
        ani.event_source.stop()
        animation_running = False

    return trajectory_line, rocket_point, text_box, peak_marker, peak_label

ani = FuncAnimation(
    fig, update,
    frames=range(1, len(t_eval)),
    interval=20, blit=False
)

plt.tight_layout()
plt.show()</code></pre>
    </section>
  </main>

  <footer>© 2025 Rocket Lab — generated for demonstration.</footer>

  <script>
    const btn = document.getElementById('copyBtn');
    const codeEl = document.getElementById('codeBlock');
    btn.addEventListener('click', async () => {
      try {
        const text = codeEl.textContent;
        await navigator.clipboard.writeText(text);
        const old = btn.textContent;
        btn.textContent = '복사됨!';
        setTimeout(() => btn.textContent = old, 1200);
      } catch (e) {
        alert('복사에 실패했습니다. 직접 드래그하여 복사해주세요.');
      }
    });
  </script>
</body>
</html>
